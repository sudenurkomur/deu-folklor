{"version":3,"file":"server.js","names":["_react","require","_constants","_utils","_jsxRuntime","SELF_CLOSING_TAGS","TAG_NAMES","NOSCRIPT","SCRIPT","STYLE","encodeSpecialCharacters","str","encode","replace","generateElementAttributesAsString","attrs","res","name","value","Object","entries","attr","propToAttr","neu","undefined","generateTitleAsString","title","attrsStr","flattenedTitle","flattenArray","HELMET_ATTRIBUTE","generateTagsAsString","type","tags","tag","attributeHtml","TAG_PROPERTIES","INNER_HTML","CSS_TEXT","attrName","HTML_TAG_MAP","valStr","String","tagContent","innerHTML","cssText","isSelfClosing","includes","mapElementAttributesToProps","attributes","ops","addHelmetDataAttr","addKey","key","propName","REACT_TAG_MAP","dangerouslySetInnerHTML","__html","renderTitle","jsx","children","renderElement","createElement","renderElements","i","length","push","newServerState","heap","getState","state","calcAggregatedState","helmets","base","toComponent","props","toString","s","bodyAttributes","htmlAttributes","link","links","meta","noscript","priority","script","style","titleAttributes"],"sources":["../../src/server.tsx"],"sourcesContent":["import {\n  type HTMLAttributes,\n  type Key,\n  type ReactNode,\n  createElement,\n} from 'react';\n\nimport {\n  HELMET_ATTRIBUTE,\n  TAG_NAMES,\n  REACT_TAG_MAP,\n  TAG_PROPERTIES,\n  HTML_TAG_MAP,\n} from './constants';\n\nimport type {\n  HelmetProviderHeap,\n  HelmetServerState,\n  ScriptProps,\n  StyleProps,\n  TitleProps,\n} from './types';\n\nimport {\n  calcAggregatedState,\n  flattenArray,\n  propToAttr,\n} from './utils';\n\nconst SELF_CLOSING_TAGS: string[] = [\n  TAG_NAMES.NOSCRIPT,\n  TAG_NAMES.SCRIPT,\n  TAG_NAMES.STYLE,\n];\n\nconst encodeSpecialCharacters = (str: string, encode = true) => {\n  if (!encode) return str;\n\n  return str.replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#x27;');\n};\n\nfunction generateElementAttributesAsString<T>(\n  attrs: HTMLAttributes<T>,\n): string {\n  let res: string = '';\n\n  for (const [name, value] of Object.entries(attrs)) {\n    const attr = propToAttr(name);\n    const neu = value === undefined ? attr : `${attr}=\"${value}\"`;\n    if (neu && res) res += ' ';\n    res += neu;\n  }\n\n  return res;\n}\n\nconst generateTitleAsString = (\n  title: string,\n  attrs: TitleProps,\n  encode: boolean,\n) => {\n  let attrsStr = generateElementAttributesAsString(attrs);\n  if (attrsStr) attrsStr = ` ${attrsStr}`;\n\n  const flattenedTitle = flattenArray(title);\n\n  return `<title ${HELMET_ATTRIBUTE}=\"true\"${attrsStr}>${\n    encodeSpecialCharacters(flattenedTitle, encode)\n  }</title>`;\n};\n\nfunction generateTagsAsString<T>(\n  type: string,\n  tags: Array<HTMLAttributes<T>>,\n  encode: boolean,\n): string {\n  let res = '';\n\n  for (const tag of tags) {\n    let attributeHtml = '';\n\n    const entries = Object.entries(tag);\n    for (const [name, value] of entries) {\n      if (!(name === TAG_PROPERTIES.INNER_HTML as string\n        || name === TAG_PROPERTIES.CSS_TEXT as string)) {\n        const attrName = HTML_TAG_MAP[name] ?? name;\n\n        let attr: string;\n        if (value === undefined) attr = attrName;\n        else {\n          // Perhaps, if `value` is not a string we should just do\n          // \"attr = attrName\", as in the case just above. Playing\n          // it safe now, to avoid changes from the original code.\n          const valStr = typeof value === 'string' ? value : String(value);\n          attr = `${attrName}=\"${encodeSpecialCharacters(valStr, encode)}\"`;\n        }\n\n        if (attributeHtml) attributeHtml += ` ${attr}`;\n        else attributeHtml = attr;\n      }\n    }\n\n    const tagContent = (tag as ScriptProps).innerHTML ?? (tag as StyleProps).cssText ?? '';\n\n    const isSelfClosing = !SELF_CLOSING_TAGS.includes(type);\n\n    res += `<${type} ${HELMET_ATTRIBUTE}=\"true\" ${attributeHtml}${\n      isSelfClosing ? '/>' : `>${tagContent}</${type}>`\n    }`;\n  }\n\n  return res;\n}\n\n/**\n * Given a map of element attribute names & values it returns the corresponding\n * map of element properties & values (i.e. replacing some attribute names by\n * their corresponding property names).\n */\n\nfunction mapElementAttributesToProps<T>(\n  attributes: HTMLAttributes<T>,\n  ops: { addHelmetDataAttr?: boolean; addKey?: Key } = {},\n): Record<string, unknown> {\n  const res: Record<string, unknown> = {};\n  if (ops.addHelmetDataAttr) res[HELMET_ATTRIBUTE] = true;\n  if (ops.addKey !== undefined) res.key = ops.addKey;\n  for (const [attrName, value] of Object.entries(attributes)) {\n    const propName = REACT_TAG_MAP[attrName] ?? attrName;\n\n    switch (propName) {\n      // cssText and innerHTML props get a special treatment to avoid that React\n      // escapes their values.\n      case 'cssText':\n      case 'innerHTML':\n        res.dangerouslySetInnerHTML = { __html: value as unknown };\n        break;\n      default:\n        res[propName] = value;\n    }\n  }\n  return res;\n}\n\nfunction renderTitle(title: string, attrs: TitleProps): ReactNode {\n  // NOTE: Rendered as array to match legacy behavior.\n  return [\n    <title\n      key={title}\n      // TODO: Can we avoid violating the rule?\n      // eslint-disable-next-line react/jsx-props-no-spreading\n      {...mapElementAttributesToProps(attrs, { addHelmetDataAttr: true })}\n    >\n      {title}\n    </title>,\n  ];\n}\n\nfunction renderElement<T>(\n  type: string,\n  attrs: HTMLAttributes<T>,\n  key?: Key,\n): ReactNode {\n  return createElement(type, mapElementAttributesToProps(attrs, {\n    addHelmetDataAttr: true,\n    addKey: key,\n  }));\n}\n\nfunction renderElements<T>(\n  type: string,\n  attrs: Array<HTMLAttributes<T>>,\n): ReactNode[] {\n  const res: ReactNode[] = [];\n  for (let i = 0; i < attrs.length; ++i) {\n    res.push(renderElement(type, attrs[i]!, i));\n  }\n  return res;\n}\n\nexport function newServerState(heap: HelmetProviderHeap): HelmetServerState {\n  // TODO: Should this function to be attached to the heap itself?\n  const getState = () => {\n    // eslint-disable-next-line no-param-reassign\n    heap.state ??= calcAggregatedState(heap.helmets);\n    return heap.state;\n  };\n\n  return {\n    base: {\n      toComponent() {\n        const props = getState().base;\n        return props ? renderElements('base', [props]) : [];\n      },\n      toString() {\n        const s = getState();\n        return s.base ? generateTagsAsString('base', [s.base], s.encodeSpecialCharacters) : '';\n      },\n    },\n    bodyAttributes: {\n      toComponent() {\n        const props = getState().bodyAttributes;\n        return mapElementAttributesToProps(props ?? {});\n      },\n      toString() {\n        const props = getState().bodyAttributes;\n        return generateElementAttributesAsString(props ?? {});\n      },\n    },\n    htmlAttributes: {\n      toComponent() {\n        const props = getState().htmlAttributes;\n        return mapElementAttributesToProps(props ?? {});\n      },\n      toString() {\n        const props = getState().htmlAttributes;\n        return generateElementAttributesAsString(props ?? {});\n      },\n    },\n    link: {\n      toComponent() {\n        return renderElements('link', getState().links ?? []);\n      },\n      toString() {\n        const s = getState();\n        return generateTagsAsString('link', s.links ?? [], s.encodeSpecialCharacters);\n      },\n    },\n    meta: {\n      toComponent() {\n        return renderElements('meta', getState().meta ?? []);\n      },\n      toString() {\n        const s = getState();\n        return generateTagsAsString('meta', s.meta ?? [], s.encodeSpecialCharacters);\n      },\n    },\n    noscript: {\n      toComponent() {\n        return renderElements('noscript', getState().noscript ?? []);\n      },\n      toString() {\n        const s = getState();\n        return generateTagsAsString('noscript', s.noscript ?? [], s.encodeSpecialCharacters);\n      },\n    },\n    priority: {\n      toComponent() {\n        const s = getState();\n        return [\n          ...renderElements('meta', s.priority?.meta ?? []),\n          ...renderElements('link', s.priority?.links ?? []),\n          ...renderElements('script', s.priority?.script ?? []),\n        ];\n      },\n      toString() {\n        const s = getState();\n        const meta = generateTagsAsString('meta', s.priority?.meta ?? [], s.encodeSpecialCharacters);\n        const link = generateTagsAsString('link', s.priority?.links ?? [], s.encodeSpecialCharacters);\n        const script = generateTagsAsString('script', s.priority?.script ?? [], s.encodeSpecialCharacters);\n\n        let res = meta;\n        if (link) {\n          if (res) res += ' ';\n          res += link;\n        }\n        if (script) {\n          if (res) res += ' ';\n          res += script;\n        }\n\n        return res;\n      },\n    },\n    script: {\n      toComponent() {\n        return renderElements('script', getState().script ?? []);\n      },\n      toString() {\n        const s = getState();\n        return generateTagsAsString('script', s.script ?? [], s.encodeSpecialCharacters);\n      },\n    },\n    style: {\n      toComponent() {\n        return renderElements('style', getState().style ?? []);\n      },\n      toString() {\n        const s = getState();\n        return generateTagsAsString('style', s.style ?? [], s.encodeSpecialCharacters);\n      },\n    },\n    title: {\n      toComponent(): ReactNode {\n        const s = getState();\n        return renderTitle(s.title ?? '', s.titleAttributes ?? {});\n      },\n      toString() {\n        const s = getState();\n        return generateTitleAsString(s.title ?? '', s.titleAttributes ?? {}, s.encodeSpecialCharacters);\n      },\n    },\n  };\n}\n"],"mappings":"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","ignoreList":[]}